{% include 'navbar.html' %}
{% include 'flash_messages.html' %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Canteen Menu</title>
    <style>
        body { font-family: Arial, sans-serif; background:#f0fafa; margin:0; padding:0; }
        h1 { text-align:center; color:#00bfae; padding:18px 0; }
        .cards { display:flex; flex-wrap:wrap; justify-content:center; gap:20px; padding:20px; }
        .card { width:260px; background:#fff; border-radius:12px; box-shadow:0 6px 18px rgba(0,0,0,0.08); padding:16px; text-align:center; }
        .card img { width:100%; height:160px; object-fit:cover; border-radius:8px; }
        .price { color:#555; margin:6px 0; }
        .btn { display:inline-block; margin:6px 4px; padding:8px 12px; border-radius:8px; color:#fff; text-decoration:none; font-weight:bold; }
        .btn-details { background:#00bfae; } .btn-log { background:#ff9800; } .btn-edit { background:#1976d2; }
        .nutrition { text-align:left; font-size:0.9em; color:#333; margin-top:8px; }
    </style>
</head>
<body>
    <h1>Canteen Menu</h1>
    <div class="cards">
        {% for item in food_items %}
        <div class="card">
            <img src="{{ url_for('static', filename=item.image) }}" alt="{{ item.name }}">
            <h3>{{ item.name }}</h3>
            <p class="price">â‚¹{{ "%.2f"|format(item.price) }}</p>

            <div class="nutrition">
                <p><strong>Calories:</strong> {{ item.nutrition.get("Calories", "-") }}</p>
                <p><strong>Protein:</strong> {{ item.nutrition.get("Protein", "-") }}</p>
                <p><strong>Fat:</strong> {{ item.nutrition.get("Fat", "-") }}</p>
                <p><strong>Carbs:</strong> {{ item.nutrition.get("Carbs", "-") }}</p>
            </div>

            <a href="{{ url_for('food_detail', food_id=item.id) }}" class="btn btn-details">Details</a>
            <form action="{{ url_for('log_food', food_id=item.id) }}" method="POST" style="display:inline;">
                <button type="submit" class="btn btn-log">Log Food</button>
            </form>

            {% if current_user.is_authenticated and current_user.is_admin %}
                <a href="{{ url_for('edit_food', food_id=item.id) }}" class="btn btn-edit">Edit</a>
            {% endif %}
        </div>
        {% endfor %}
    </div>
</body>
</html>
